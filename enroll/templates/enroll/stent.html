{% extends 'enroll/question.html' %}

{% block content %}

<script>
  function showHide0(){
    var a = document.getElementById('opt1').value;
    if (a=="0"){
      document.getElementById('stentinfo').style.display='none';
      document.getElementById('stent1').style.display='none';
      document.getElementById('stent2').style.display='none';
      document.getElementById('stent3').style.display='none';
      document.getElementById('st_name1').required = false;
      document.getElementById('st_name2').required = false;
      document.getElementById('st_name3').required = false;
      document.getElementById('len1').required = false;
      document.getElementById('len2').required = false;
      document.getElementById('len3').required = false;
      document.getElementById('pre1').required = false;
      document.getElementById('pre2').required = false;
      document.getElementById('pre3').required = false;
    }else if (a == "1"){
      document.getElementById('stentinfo').style.display='block';
      document.getElementById('stent1').style.display='block';
      document.getElementById('stent2').style.display='none';
      document.getElementById('stent3').style.display='none';
      document.getElementById('st_name1').required = true;
      document.getElementById('st_name2').required = false;
      document.getElementById('st_name3').required = false;
      document.getElementById('len1').required = true;
      document.getElementById('len2').required = false;
      document.getElementById('len3').required = false;
      document.getElementById('pre1').required = true;
      document.getElementById('pre2').required = false;
      document.getElementById('pre3').required = false;
    }else if (a== "2"){
      document.getElementById('stentinfo').style.display='block';
      document.getElementById('stent1').style.display='block';
      document.getElementById('stent2').style.display='block';
      document.getElementById('stent3').style.display='none';
      document.getElementById('st_name1').required = true;
      document.getElementById('st_name2').required = true;
      document.getElementById('st_name3').required = false;
      document.getElementById('len1').required = true;
      document.getElementById('len2').required = true;
      document.getElementById('len3').required = false;
      document.getElementById('pre1').required = true;
      document.getElementById('pre2').required = true;
      document.getElementById('pre3').required = false;
    }else{
      document.getElementById('stentinfo').style.display='block';
      document.getElementById('stent1').style.display='block';
      document.getElementById('stent2').style.display='block';
      document.getElementById('stent3').style.display='block';
      document.getElementById('st_name1').required = true;
      document.getElementById('st_name2').required = true;
      document.getElementById('st_name3').required = true;
      document.getElementById('len1').required = true;
      document.getElementById('len2').required = true;
      document.getElementById('len3').required = true;
      document.getElementById('pre1').required = true;
      document.getElementById('pre2').required = true;
      document.getElementById('pre3').required = true;
    }
  }
  function showHide1(){
    var a = document.getElementById('opt2').value
    if (a=="Unknown" || a == 3){
      document.getElementById('timi').style.display='none';
    }else{
      document.getElementById('timi').style.display='';
    }
  }
  function showHide2(){
    var a = document.getElementById('opt3').value;
    if (a=='No'){
      document.getElementById('check').style.display='none';
    }else{
      document.getElementById('check').style.display='block';
    }
  }

  function showHide3(){
    var a = document.getElementById('opt4').value;
    if (a=='No'){
      document.getElementById('finding').style.display='none';
      document.getElementById('finding').required=false
    }else{
      document.getElementById('finding').style.display='block';
      document.getElementById('finding').required=true
    }
  }

  function showHide4(){
    var a = document.getElementById('opt5').value;
    if (a=='No'){
      document.getElementById('value').style.display='none';
       document.getElementById('value').required=false
    }else{
      document.getElementById('value').style.display='block';
       document.getElementById('value').required=true
    }
  }

  function chk_other(){
    if(document.getElementById('f').checked){
      document.getElementById('chk_bx').style.display='block'
      document.getElementById('chk_bx').required=true
    }
    else{
      document.getElementById('chk_bx').style.display='none'
      document.getElementById('chk_bx').required=false
    }
  }


</script>

<div class="row">
  <div class="container mt-3">
    <h1 class="text-center alert alert-primary">STUDY STENT INFORMATION</h1>
  </div>
	<div class="col-sm-12">
    <form method="POST">
      {% csrf_token %}

        <table class="table table-hover" >
            <tbody>
              {% for ques in question1 %}
            <tr>
              <td width="70%">{{ ques.q_text }}</td>
              <td width="30%">
                <select name="stent[]" class="form-control w-35" id="opt1" onclick="showHide0()">
                  <option name="stent[]" value="0">0</option>
                  <option name="stent[]" value="1">1</option>
                  <option name="stent[]" value="2">2</option>
                  <option name="stent[]" value="3">3</option>
                </select>
              </td>
            </tr>
              {% endfor %}
            </tbody>
        </table>

        <table class="table table-hover" >
          <tbody>
            <tr id="stentinfo" style="display: none; padding: 0px;" class="alert alert-info">
              <td><strong> Stent Information </strong></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr id="stent1" class="form-inline" style="display: none;">
              <td>
                <input type="text" id="st_name1" class="form-control" name="stent[]" placeholder="Stent Name" >
              </td>
              <td>
                Diameter : 
                <select name="stent[]" class="form-control" id="diameter" >
                  <option name="stent[]" value="2">2</option>
                  <option name="stent[]" value="2.25">2.25</option>
                  <option name="stent[]" value="2.5">2.5</option>
                  <option name="stent[]" value="2.75">2.75</option>
                  <option name="stent[]" value="3">3</option>
                  <option name="stent[]" value="3.5">3.5</option>
                  <option name="stent[]" value="4">4</option>
                  <option name="stent[]" value="4.5">4.5</option>
                  <option name="stent[]" value="5">5</option>
                </select>
              </td>
              <td>
                Length : <input type="number" id="len1" class="form-control w-35" name="stent[]">
              </td>
              <td>
                Max Deploy Pressure : <input type="number" id="pre1" class="form-control w-35" name="stent[]">
              </td>
            </tr>

            <tr id="stent2" class="form-inline" style="display: none;">
              <td>
                <input type="text" id="st_name2" class="form-control" name="stent[]" placeholder="Stent Name">
              </td>
              <td>
                Diameter : 
                <select name="stent[]" class="form-control" id="diameter">
                  <option name="stent[]" value="2">2</option>
                  <option name="stent[]" value="2.25">2.25</option>
                  <option name="stent[]" value="2.5">2.5</option>
                  <option name="stent[]" value="2.75">2.75</option>
                  <option name="stent[]" value="3">3</option>
                  <option name="stent[]" value="3.5">3.5</option>
                  <option name="stent[]" value="4">4</option>
                  <option name="stent[]" value="4.5">4.5</option>
                  <option name="stent[]" value="5">5</option>
                </select>
              </td>
              <td>
                Length : <input type="number" id="len2" class="form-control w-35" name="stent[]" >
              </td>
              <td>
                Max Deploy Pressure : <input type="number" id="pre2" class="form-control w-35" name="stent[]">
              </td>
            </tr>

            <tr id="stent3" class="form-inline" style="display: none;">
              <td>
                <input type="text" id="st_name3" class="form-control" name="stent[]" placeholder="Stent Name">
              </td>
              <td>
                Diameter : 
                <select name="stent[]" class="form-control" id="diameter">
                  <option name="stent[]" value="2">2</option>
                  <option name="stent[]" value="2.25">2.25</option>
                  <option name="stent[]" value="2.5">2.5</option>
                  <option name="stent[]" value="2.75">2.75</option>
                  <option name="stent[]" value="3">3</option>
                  <option name="stent[]" value="3.5">3.5</option>
                  <option name="stent[]" value="4">4</option>
                  <option name="stent[]" value="4.5">4.5</option>
                  <option name="stent[]" value="5">5</option>
                </select>
              </td>
              <td>
                Length : <input type="number" id="len3" class="form-control w-35" name="stent[]">
              </td>
              <td>
                Max Deploy Pressure : <input type="number" id="pre3" class="form-control w-35" name="stent[]">
              </td>
            </tr>
          
          </tbody>
        </table>

        <table class="table table-hover">
          <tbody>
            <tr>
              <th class="alert alert-info" width="70%">POST PROCEDURAL RESULTS</th>
              <th class="alert alert-info" width="30%"></th>
            </tr>
            {% for ques in question2 %}
            <tr>
              <td>{{ ques.q_text }}</td>
              <td>
                <select name="timi[]" class="form-control w-35" id="opt2" onchange="showHide1()" >
                  <option value="Unknown">Unknown</option>
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                </select>
              </td>
                <tr id="timi" style="display: none;">
                  <td><p style="font-size: 12px;"><i>*If TIMI Flow=0,1 or 2,<strong> Hold Ctrl/Shift</strong> and select all valid</i></p></td>
                  <td>
                    <select name="timi[]" class="form-control w-35" multiple="multiple">
                      <option value="Adenosine">Adenosine</option>
                      <option value="Nikorandil">Nikorandil</option>
                      <option value="Verapamil">Verapamil</option>
                      <option value="NTG">NTG</option>
                      <option value="Tirofiban">Tirofiban</option>
                      <option value="Adrenaline">Adrenaline</option>
                      <option value="None">None</option>
                      <option value="Others">Others</option>
                    </select>
                  </td>
              </tr>
            </tr>
            {% endfor %}

            {% for ques in question4 %}
            <tr>
              <td>{{ ques.q_text }}</td>
              <td>
                {{ yesno_form.ans_text }}
              </td>
            </tr>
            {% endfor %}

            {% for ques in question5 %}
            <tr>
              <td>{{ ques.q_text }}</td>
              <td>
                <select name="complication[]" class="form-control w-35" id="opt3" onclick="showHide2()">
                  <option value="No">No</option>
                  <option value="Yes">Yes</option>
                </select>
                <fieldset name="complication[]" id="check" style="display: none;">                
                <input type="checkbox" name="complication[]" id="a" value="Dissection > Type B">
                <label for="a">Dissection > Type B</label> <br>
                <input type="checkbox" name="complication[]" id="b" value="No re-flow">
                <label for="b"> No re-flow</label> <br>
                <input type="checkbox" name="complication[]" id="c" value=" Distal embolization">
                <label for="c">  Distal embolization</label> <br>
                <input type="checkbox" name="complication[]" id="d" value="Perforation">
                <label for="d">Perforation</label> <br>
                <input type="checkbox" name="complication[]" id="e" value="Abrupt closure">
                <label for="e">Abrupt closure</label> <br>
                <input type="checkbox" name="complication[]" id="f" value="Others" onchange="chk_other()">
                <label for="f">Others</label> <br>
              
              <input type="text" class="form-control" name="complication[]" id="chk_bx" placeholder="Specify" style="display: none;">
              </fieldset>
              </td>
            </tr>
            {% endfor %}
            <tr>
              <th class="alert alert-info">POST-DILATATION</th>
            <th class="alert alert-info"></th>
            </tr>

            {% for ques in question6 %}
            <tr>
              <td>{{ ques.q_text }}</td>
              <td>
                {{ yesno_form.ans_text }}
              </td>
            </tr>
            {% endfor %}

            {% for ques in question7 %}
            <tr>
              <td>{{ ques.q_text }}</td>
              <td>
                <select name="findings[]" class="form-control w-35" id="opt4" onclick="showHide3()">
                  <option value="No">No</option>
                  <option value="Yes">Yes</option>
                </select>

                <textarea name="findings[]" id="finding" placeholder="Findings" class="form-control w-100" style="display: none;"></textarea>
              </td>
            </tr>
            {% endfor %}

            {% for ques in question8 %}
            <tr>
              <td>{{ ques.q_text }}</td>
              <td class="form-inline">
                <select name="value[]" class="form-control w-35" id="opt5" onclick="showHide4()">
                  <option value="No">No</option>
                  <option value="Yes">Yes</option>
                </select>&nbsp;

                <input type="number" class="form-control w-35" name="value[]" id="value" placeholder="Enter Value" style="display: none;">
              </td>
            </tr>
            {% endfor %}
            </tbody>
          </table>
        <input type="submit" class="btn btn-outline-success" name="next" value="Next" style="float: right;">
      <input type="submit" class="btn btn-outline-danger" name="home" value="Save and Exit" >
    </form>
	</div>
</div>
{% endblock %}