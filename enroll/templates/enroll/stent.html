{% extends 'enroll/question.html' %}

{% block content %}

<script>
  function showHide0(){
    var a = document.getElementById('opt1').value;
    if (a=="0"){
      document.getElementById('stentinfo').style.visibility='hidden';
      document.getElementById('stent1').style.visibility='hidden';
      document.getElementById('stent2').style.visibility='hidden';
      document.getElementById('stent3').style.visibility='hidden';
    }else if (a == "1"){
      document.getElementById('stentinfo').style.visibility='visible';
      document.getElementById('stent1').style.visibility='visible';
      document.getElementById('stent2').style.visibility='hidden';
      document.getElementById('stent3').style.visibility='hidden';
    }else if (a== "2"){
      document.getElementById('stentinfo').style.visibility='visible';
      document.getElementById('stent1').style.visibility='visible';
      document.getElementById('stent2').style.visibility='visible';
      document.getElementById('stent3').style.visibility='hidden';
    }else{
      document.getElementById('stentinfo').style.visibility='visible';
      document.getElementById('stent1').style.visibility='visible';
      document.getElementById('stent2').style.visibility='visible';
      document.getElementById('stent3').style.visibility='visible';
    }
  }
  function showHide1(){
    var a = document.getElementById('opt2').value
    if (a=="Unknown" || a == 3){
      document.getElementById('timi').style.visibility='hidden';
    }else{
      document.getElementById('timi').style.visibility='visible';
    }
  }
  function showHide2(){
    var a = document.getElementById('opt3').value;
    if (a=='No'){
      document.getElementById('check').style.visibility='hidden';
    }else{
      document.getElementById('check').style.visibility='visible';
    }
  }

  function showHide3(){
    var a = document.getElementById('opt4').value;
    if (a=='No'){
      document.getElementById('findings').style.visibility='hidden';
    }else{
      document.getElementById('findings').style.visibility='visible';
    }
  }

  function showHide4(){
    var a = document.getElementById('opt5').value;
    if (a=='No'){
      document.getElementById('value').style.visibility='hidden';
    }else{
      document.getElementById('value').style.visibility='visible';
    }
  }


</script>

<div class="row">
  <div class="container mt-3">
    <h1 class="text-center alert alert-primary">STUDY STENT INFORMATION</h1>
  </div>
	<div class="col-sm-12">
    <form method="POST">
      {% csrf_token %}

        <table class="table table-hover" >
            <tbody>
              {% for ques in question1 %}
            <tr>
              <td width="70%">{{ ques.q_text }}</td>
              <td width="30%">
                <select name="stent[]" id="opt1" onclick="showHide0()">
                  <option name="stent[]" value="0">0</option>
                  <option name="stent[]" value="1">1</option>
                  <option name="stent[]" value="2">2</option>
                  <option name="stent[]" value="3">3</option>
                </select>
              </td>
            </tr>
              {% endfor %}
            </tbody>
        </table>

        <table class="table table-hover" >
          <tbody>
            <tr id="stentinfo" style="visibility: hidden;" class="alert alert-info">
              <td><strong> Stent Information </strong></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr id="stent1" style="visibility: hidden;">
              <td>
                <input type="text" name="stent[]" placeholder="Stent Name" >
              </td>
              <td>
                <label for="diameter">Diameter: </label> 
                <select name="stent[]" id="diameter" >
                  <option name="stent[]" value="2">2</option>
                  <option name="stent[]" value="2.25">2.25</option>
                  <option name="stent[]" value="2.5">2.5</option>
                  <option name="stent[]" value="2.75">2.75</option>
                  <option name="stent[]" value="3">3</option>
                  <option name="stent[]" value="3.5">3.5</option>
                  <option name="stent[]" value="4">4</option>
                  <option name="stent[]" value="4.5">4.5</option>
                  <option name="stent[]" value="5">5</option>
                </select>
              </td>
              <td>
                Length:<input type="number" name="stent[]">
              </td>
              <td>
                Max Deploy Pressure:<input type="number" name="stent[]">
              </td>
            </tr>

            <tr id="stent2" style="visibility: hidden;">
              <td>
                <input type="text" name="stent[]" placeholder="Stent Name">
              </td>
              <td>
                <label for="diameter">Diameter: </label>
                <select name="stent[]" id="diameter">
                  <option name="stent[]" value="2">2</option>
                  <option name="stent[]" value="2.25">2.25</option>
                  <option name="stent[]" value="2.5">2.5</option>
                  <option name="stent[]" value="2.75">2.75</option>
                  <option name="stent[]" value="3">3</option>
                  <option name="stent[]" value="3.5">3.5</option>
                  <option name="stent[]" value="4">4</option>
                  <option name="stent[]" value="4.5">4.5</option>
                  <option name="stent[]" value="5">5</option>
                </select>
              </td>
              <td>
                Length:<input type="number" name="stent[]" >
              </td>
              <td>
                Max Deploy Pressure:<input type="number" name="stent[]">
              </td>
            </tr>

            <tr id="stent3" style="visibility: hidden;">
              <td>
                <input type="text" name="stent[]" placeholder="Stent Name">
              </td>
              <td>
                <label for="diameter">Diameter: </label>
                <select name="stent[]" id="diameter">
                  <option name="stent[]" value="2">2</option>
                  <option name="stent[]" value="2.25">2.25</option>
                  <option name="stent[]" value="2.5">2.5</option>
                  <option name="stent[]" value="2.75">2.75</option>
                  <option name="stent[]" value="3">3</option>
                  <option name="stent[]" value="3.5">3.5</option>
                  <option name="stent[]" value="4">4</option>
                  <option name="stent[]" value="4.5">4.5</option>
                  <option name="stent[]" value="5">5</option>
                </select>
              </td>
              <td>
                Length:<input type="number" name="stent[]">
              </td>
              <td>
                Max Deploy Pressure:<input type="number" name="stent[]">
              </td>
            </tr>
          
          </tbody>
        </table>

        <table class="table table-hover">
          <tbody>
            <tr>
              <th class="alert alert-info">POST PROCEDURAL RESULTS</th>
              <th class="alert alert-info"></th>
            </tr>
            {% for ques in question2 %}
            <tr>
              <td>{{ ques.q_text }}</td>
              <td>
                <select name="timi[]" id="opt2" onchange="showHide1()" >
                  <option value="Unknown">Unknown</option>
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                </select>
              </td>
                <tr id="timi"  style="visibility: hidden;">
                  <td><p style="font-size: 12px;"><i>*If TIMI Flow=0,1 or 2,<strong> Hold Ctrl/Shift</strong> and select all valid</i></p></td>
                  <td>
                    <select name="timi[]" multiple="multiple">
                      <option value="Adenosine">Adenosine</option>
                      <option value="Nikorandil">Nikorandil</option>
                      <option value="Verapamil">Verapamil</option>
                      <option value="NTG">NTG</option>
                      <option value="Tirofiban">Tirofiban</option>
                      <option value="Adrenaline">Adrenaline</option>
                      <option value="None">None</option>
                      <option value="Others">Others</option>
                    </select>
                  </td>
              </tr>
            </tr>
            {% endfor %}

            {% for ques in question4 %}
            <tr>
              <td>{{ ques.q_text }}</td>
              <td>
                {{ yesno_form.ans_text }}
              </td>
            </tr>
            {% endfor %}

            {% for ques in question5 %}
            <tr>
              <td>{{ ques.q_text }}</td>
              <td>
                <select name="complication[]" id="opt3" onclick="showHide2()">
                  <option value="No">No</option>
                  <option value="Yes">Yes</option>
                </select>
                <fieldset name="complication[]" id="check" style="visibility: hidden;">                
                <input type="checkbox" name="complication[]" id="a" value="Dissection > Type B">
                <label for="a">Dissection > Type B</label> <br>
                <input type="checkbox" name="complication[]" id="b" value="No re-flow">
                <label for="b"> No re-flow</label> <br>
                <input type="checkbox" name="complication[]" id="c" value=" Distal embolization">
                <label for="c">  Distal embolization</label> <br>
                <input type="checkbox" name="complication[]" id="d" value="Perforation">
                <label for="d">Perforation</label> <br>
                <input type="checkbox" name="complication[]" id="e" value="Abrupt closure">
                <label for="e">Abrupt closure</label> <br>
              
              <input type="text" name="complication[]" id="check" placeholder="Other,specify">
              </fieldset>
              </td>
            </tr>
            {% endfor %}
            <tr>
              <th class="alert alert-info">POST-DILATATION</th>
            <th class="alert alert-info"></th>
            </tr>

            {% for ques in question6 %}
            <tr>
              <td>{{ ques.q_text }}</td>
              <td>
                {{ yesno_form.ans_text }}
              </td>
            </tr>
            {% endfor %}

            {% for ques in question7 %}
            <tr>
              <td>{{ ques.q_text }}</td>
              <td>
                <select name="findings[]" id="opt4" onclick="showHide3()">
                  <option value="No">No</option>
                  <option value="Yes">Yes</option>
                </select>

                <textarea name="findings[]" id="findings" placeholder="Findings" class="w-100" style="visibility: hidden;"></textarea>
              </td>
            </tr>
            {% endfor %}

            {% for ques in question8 %}
            <tr>
              <td>{{ ques.q_text }}</td>
              <td>
                <select name="value[]" id="opt5" onclick="showHide4()">
                  <option value="No">No</option>
                  <option value="Yes">Yes</option>
                </select>

                <input type="number" name="value[]" id="value" placeholder="Enter Value" style="visibility: hidden;">
              </td>
            </tr>
            {% endfor %}
            </tbody>
          </table>
        <input type="submit" class="btn btn-outline-success" name="next" value="Next" style="float: right;">
      <input type="submit" class="btn btn-outline-danger" name="home" value="Save and Exit" >
    </form>
	</div>
</div>
{% endblock %}